<div class="min-h-screen grid grid-cols-12">
  <div class="col-span-12 lg:col-span-5 xl:col-span-4 flex items-center justify-center p-4 sm:p-6">
    <div class="form-shell w-full">
      <div class="flex items-center gap-2 mb-4">
        <div class="brand-mark inline-flex items-center justify-center">
          <i class="bi bi-key"></i>
        </div>
        <div>
          <h6 class="m-0 font-semibold">Restablecer contraseña</h6>
          <small class="text-slate-500">Ingresa tu nueva contraseña</small>
        </div>
      </div>

      @if (error()) {
        <div class="rounded-lg border border-red-300 bg-red-50 text-red-700 px-4 py-3 text-sm flex gap-3 items-start mb-3" role="alert">
          <i class="bi bi-exclamation-triangle mt-1"></i>
          <div class="font-medium flex-1">{{ error() }}</div>
          <button type="button" class="p-1 rounded hover:bg-red-100/70" (click)="error.set(null)" aria-label="Cerrar">
            <i class="bi bi-x-lg"></i>
          </button>
        </div>
      }

      @if (info()) {
        <div class="rounded-lg border border-green-300 bg-green-50 text-green-700 px-4 py-3 text-sm flex gap-3 items-start mb-3" role="status">
          <i class="bi bi-check-circle mt-1"></i>
          <div class="font-medium flex-1">{{ info() }}</div>
          <button type="button" class="p-1 rounded hover:bg-green-100/70" (click)="info.set(null)" aria-label="Cerrar">
            <i class="bi bi-x-lg"></i>
          </button>
        </div>
      }

      <form (submit)="$event.preventDefault(); submit()">
        <div class="mb-3">
          <label for="rcv-pass" class="text-sm font-medium text-slate-700">Nueva contraseña</label>
          <input id="rcv-pass" type="password" class="block w-full rounded-lg border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm"
            [ngModel]="password()" (ngModelChange)="password.set($event)" name="password" placeholder="••••••••" autocomplete="new-password" required>
          @if (pwdWeak()) { <small class="text-xs text-amber-600">Mínimo 8 caracteres.</small> }
        </div>
        <div class="mb-4">
          <label for="rcv-confirm" class="text-sm font-medium text-slate-700">Confirmar contraseña</label>
          <input id="rcv-confirm" type="password" class="block w-full rounded-lg border border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm"
            [ngModel]="confirm()" (ngModelChange)="confirm.set($event)" name="confirm" placeholder="••••••••" autocomplete="new-password" required>
          @if (pwdMismatch()) { <small class="text-xs text-red-600">Las contraseñas no coinciden.</small> }
        </div>
        <div class="grid gap-2">
          <button type="submit" class="px-4 py-2 rounded-lg bg-primary-600 text-white hover:bg-primary-700 disabled:opacity-50 flex items-center justify-center gap-2" [disabled]="!canSubmit()">
            @if(loading()) { <span class="spinner-border spinner-border-sm mr-2"></span> }
            {{ loading() ? 'Actualizando…' : 'Actualizar contraseña' }}
          </button>
          <div class="text-center mt-2 text-xs">
            <a class="font-semibold" routerLink="/login">Volver al inicio de sesión</a>
          </div>
        </div>
      </form>
    </div>
  </div>
  <div class="hidden lg:block col-span-7 xl:col-span-8 relative illustration">
    <div class="illustration-overlay"></div>
    <div class="illustration-content">
      <h2 class="text-3xl font-semibold mb-3">Protege tu cuenta</h2>
      <p class="text-base/7 opacity-80 mb-4">Elige una contraseña segura que puedas recordar.</p>
    </div>
  </div>
</div>
