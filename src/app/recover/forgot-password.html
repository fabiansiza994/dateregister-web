<div class="min-h-screen grid grid-cols-12">
  <div class="col-span-12 lg:col-span-5 xl:col-span-4 flex items-center justify-center p-4 sm:p-6">
    <div class="form-shell w-full">
      <div class="flex items-center gap-2 mb-4">
        <div class="brand-mark inline-flex items-center justify-center">
          <i class="bi bi-envelope"></i>
        </div>
        <div>
          <h6 class="m-0 font-semibold">Recuperar cuenta</h6>
          <small class="text-slate-500">Te enviaremos un enlace a tu correo</small>
        </div>
      </div>

      @if (error()) {
        <div class="rounded-lg border border-red-300 bg-red-50 text-red-700 px-4 py-3 text-sm flex gap-3 items-start mb-3" role="alert">
          <i class="bi bi-exclamation-triangle mt-1"></i>
          <div class="font-medium flex-1">{{ error() }}</div>
          <button type="button" class="p-1 rounded hover:bg-red-100/70" (click)="error.set(null)" aria-label="Cerrar">
            <i class="bi bi-x-lg"></i>
          </button>
        </div>
      }

      @if (info()) {
        <div class="rounded-lg border border-green-300 bg-green-50 text-green-700 px-4 py-3 text-sm flex gap-3 items-start mb-3" role="status">
          <i class="bi bi-check-circle mt-1"></i>
          <div class="font-medium flex-1">{{ info() }}</div>
          <button type="button" class="p-1 rounded hover:bg-green-100/70" (click)="info.set(null)" aria-label="Cerrar">
            <i class="bi bi-x-lg"></i>
          </button>
        </div>
      }

      <form (submit)="$event.preventDefault(); submit()">
        <div class="mb-3">
          <label for="fp-email" class="text-sm font-medium text-slate-700">Correo</label>
          <div class="mt-1 flex rounded-lg shadow-sm relative">
            <span class="inline-flex items-center px-3 rounded-l-lg border border-gray-300 bg-gray-50 text-gray-500 text-sm">
              <i class="bi bi-at"></i>
            </span>
            <input id="fp-email" type="email" class="block w-full min-w-0 flex-1 rounded-r-lg border border-l-0 border-gray-300 px-3 py-2 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm"
              [ngModel]="email()" (ngModelChange)="email.set($event)" name="email" placeholder="tucorreo@ejemplo.com" autocomplete="email" required>
          </div>
          <small class="text-xs text-slate-500">Te enviaremos un correo si la dirección está registrada.</small>
        </div>

        <div class="grid gap-2">
          <button type="submit" class="px-4 py-2 rounded-lg bg-primary-600 text-white hover:bg-primary-700 disabled:opacity-50 flex items-center justify-center gap-2" [disabled]="!isValidEmail || loading() || cooldownLeft()>0">
            @if(loading()) { <span class="spinner-border spinner-border-sm mr-2"></span> }
            @if (!loading() && cooldownLeft()>0) { {{ 'Reintentar en ' + cooldownLeft() + 's' }} }
            @if (!loading() && cooldownLeft()===0) { {{ 'Enviar enlace' }} }
          </button>
          <div class="text-center mt-2 text-xs">
            <a class="font-semibold" (click)="goLogin()">Volver al inicio de sesión</a>
          </div>
        </div>
      </form>
    </div>
  </div>
  <div class="hidden lg:block col-span-7 xl:col-span-8 relative illustration">
    <div class="illustration-overlay"></div>
    <div class="illustration-content">
      <h2 class="text-3xl font-semibold mb-3">¿Perdiste tu acceso?</h2>
      <p class="text-base/7 opacity-80 mb-4">No te preocupes, te ayudamos a recuperarlo de forma segura.</p>
    </div>
  </div>
</div>
