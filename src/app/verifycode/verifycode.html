<div class="mx-auto max-w-3xl px-4 py-6">
  <div class="flex items-start justify-between mb-6">
    <div>
      <h3 class="text-xl font-semibold leading-tight m-0">Activar cuenta</h3>
      <small class="block text-slate-500 mt-1">Valida el código enviado a tu correo</small>
    </div>
    <a routerLink="/login" class="inline-flex items-center text-sm font-medium text-primary hover:underline">&larr; Volver al login</a>
  </div>

  @if (error()) {
    <div class="rounded-lg border border-red-300 bg-red-50 text-red-700 px-4 py-3 text-sm flex items-start gap-3 mb-4" role="alert">
      <span class="mt-0.5 text-red-600">⚠️</span>
      <div class="flex-1">{{ error() }}</div>
      <button type="button" class="inline-flex items-center justify-center w-6 h-6 rounded-full text-red-600 hover:bg-red-200/50 transition" (click)="error.set(null)" aria-label="Cerrar">✕</button>
    </div>
  }

  @if (info()) {
    <div class="rounded-lg border border-green-300 bg-green-50 text-green-700 px-4 py-3 text-sm flex items-start gap-3 mb-4" role="alert">
      <span class="mt-0.5 text-green-600">✅</span>
      <div class="flex-1">{{ info() }}</div>
      <button type="button" class="inline-flex items-center justify-center w-6 h-6 rounded-full text-green-600 hover:bg-green-200/50 transition" (click)="info.set(null)" aria-label="Cerrar">✕</button>
    </div>
  }

  <form (submit)="$event.preventDefault(); verify()" class="bg-white rounded-2xl shadow-card border border-slate-200/70">
    <div class="p-6">
      <div class="mb-3 text-xs text-slate-500">
        <span class="font-medium">Usuario ID:</span>
        <span class="font-mono text-slate-700">{{ userId || '—' }}</span>
      </div>

      <div class="grid grid-cols-12 gap-5 items-end">
        <div class="col-span-12 md:col-span-7">
          <label class="block text-sm font-medium mb-1">Código de verificación</label>
          <input
            class="w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-800 placeholder:text-slate-400 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/30 disabled:opacity-50"
            placeholder="Ingresa el código (ej. 123456)"
            [(ngModel)]="code"
            name="code"
            autocomplete="one-time-code"
            [disabled]="loading()"
          >
          <div class="mt-1 text-xs text-slate-500">Revisa tu correo y copia el código.</div>
        </div>
        <div class="col-span-12 md:col-span-4">
          <button type="submit"
            class="inline-flex w-full justify-center items-center rounded-md bg-primary px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-primary/40 disabled:opacity-50"
            [disabled]="!canSubmit()">
            @if (loading()) { <span class="animate-spin inline-block w-4 h-4 border-2 border-current border-t-transparent rounded-full mr-2"></span> }
            Validar
          </button>
        </div>
      </div>
    </div>
  </form>
</div>
