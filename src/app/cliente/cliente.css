/* Sticky bajo navbar dinámico (móvil) */
.dr-sticky-under-nav {
  position: sticky;
  top: calc(var(--menu-h, 3.5rem) + 0.5rem);
  z-index: 20; /* por debajo del navbar (50) pero sobre contenido */
}

/* Input con botón Buscar adentro (vista móvil) */
.dr-search-wrap { position: relative; }
.dr-search-wrap .form-control { padding-left: 2.25rem; }
.dr-search-btn-inside {
  position: absolute;
  left: .5rem;
  top: 50%;
  transform: translateY(-50%);
  width: 28px; height: 28px;
  border-radius: 9999px;
  display: inline-flex; align-items: center; justify-content: center;
  color: #64748b; /* slate-500 (default fuera del topbar azul) */
  background: transparent; border: 1px solid transparent;
}
.dr-search-btn-inside:hover { color: #0ea5e9; /* sky-500 */ }
.dr-search-btn-inside:disabled { opacity: .5; }

/* Botón limpiar a la derecha del input móvil */
.dr-search-btn-right {
  position: absolute;
  right: .5rem;
  top: 50%;
  transform: translateY(-50%);
  width: 26px; height: 26px;
  border-radius: 9999px;
  display: inline-flex; align-items: center; justify-content: center;
  color: #ffffff; background: transparent; border: 1px solid transparent;
}
.dr-search-btn-right:hover { color: #ffffff; opacity: .9; }

/* Animación shake para ícono de eliminar */
@keyframes dr-shake {
  10%, 90% { transform: translateX(-1px); }
  20%, 80% { transform: translateX(2px); }
  30%, 50%, 70% { transform: translateX(-4px); }
  40%, 60% { transform: translateX(4px); }
}
button.btn-outline-danger:hover i.bi-trash {
  animation: dr-shake 0.35s linear both;
}

/* Chispas */
.dr-sparks-container { pointer-events: none; }
.dr-spark {
  position: fixed;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  transform: translate(-50%, -50%);
  animation: dr-spark-flight var(--dr-duration, 400ms) ease-out forwards;
}
@keyframes dr-spark-flight {
  from { opacity: 1; transform: translate(-50%, -50%) rotate(0deg); }
  to {
    opacity: 0;
    transform: translate(
      calc(-50% + cos(var(--dr-angle)) * var(--dr-dist)),
      calc(-50% + sin(var(--dr-angle)) * var(--dr-dist))
    ) rotate(180deg);
  }
}

/* Paginación sticky sobre bottom-nav (móvil) */
.dr-sticky-pager {
  position: sticky;
  bottom: calc(env(safe-area-inset-bottom, 0px) + 5rem + 0.5rem); /* 5rem = bottom tabs + brand */
  background: #fff;
  z-index: 25;
  border-radius: 0.75rem;
}

/* FAB crear cliente (móvil) */
.dr-create-fab {
  position: fixed;
  right: 1rem;
  /* Sube el FAB para no tapar la paginación sticky: antes +1rem, ahora +3.5rem */
  bottom: calc(env(safe-area-inset-bottom, 0px) + 5rem + 3.5rem);
  z-index: 60;
  border-radius: 9999px;
  box-shadow: 0 6px 20px rgba(0,0,0,.18);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 3rem; height: 3rem;
}

/* Desktop overrides */
@media (min-width: 768px) {
  .dr-sticky-pager { position: static !important; bottom: auto; }
  .dr-create-fab { display: none !important; }
}

/* ========== Lista estilo WhatsApp (móvil) ========== */
.dr-wa-item { width: 100%; display: flex; align-items: stretch; gap: .75rem; padding: .75rem .875rem; background: #ffffff; -webkit-tap-highlight-color: transparent; cursor: pointer; }
.dr-wa-item:active { background: #f8fafc; }
.dr-wa-item:focus-visible { outline: 2px solid rgba(14,165,233,.35); outline-offset: 2px; border-radius: .75rem; }
.dr-wa-avatar { flex: none; width: 44px; height: 44px; border-radius: 9999px; background: linear-gradient(135deg, #e0f2fe 0%, #f0f9ff 100%); color: #0ea5e9; display: inline-flex; align-items: center; justify-content: center; box-shadow: inset 0 0 0 1px rgba(14,165,233,.25); }
.dr-wa-avatar i { font-size: 18px; }
.dr-wa-main { flex: 1 1 auto; min-width: 0; }
.dr-wa-row1 { display: flex; align-items: baseline; justify-content: space-between; gap: .5rem; }
.dr-wa-title { font-weight: 600; font-size: 14px; color: #0f172a; }
.dr-wa-date { font-size: 11px; color: #94a3b8; white-space: nowrap; }
.dr-wa-row2 { display: flex; align-items: center; justify-content: space-between; gap: .5rem; margin-top: 0; }
.dr-wa-subtitle { font-size: 12px; color: #475569; line-height: 1.15; }
.dr-wa-actions { display: flex; justify-content: flex-end; gap: .5rem; }
.dr-wa-action { width: 36px; height: 36px; border-radius: 9999px; display: inline-flex; align-items: center; justify-content: center; border: 1px solid rgba(100,116,139,.35); background: #ffffff; color: #475569; box-shadow: 0 1px 2px rgba(2,6,23,.05); }
.dr-wa-action i { font-size: 16px; }
.dr-wa-action:active { background: #f8fafc; }
.dr-wa-action.is-view { color: #0284c7; border-color: rgba(56,189,248,.35); }
.dr-wa-action.is-edit { color: #4f46e5; border-color: rgba(129,140,248,.35); }
.dr-wa-action.is-delete { color: #e11d48; border-color: rgba(248,113,113,.35); }


/* ===== Topbar móvil (Clientes) ===== */
.dr-mobile-topbar {
  background: var(--bs-primary, #0d6efd);
  border: 0; border-radius: 0; box-shadow: none;
  width: 100vw; margin-left: calc(50% - 50vw); margin-right: calc(50% - 50vw);
  z-index: 49;
}
/* Topbar pegado exactamente bajo el menú, sin espacio extra */
.dr-mobile-topbar.dr-sticky-under-nav{ top: var(--menu-h, 3.5rem) !important; margin-top: 0 !important; }
/* En el topbar azul, la lupa (botón izquierdo) debe ser blanca */
.dr-mobile-topbar .dr-search-btn-inside { color: #ffffff !important; }
.dr-mobile-topbar .dr-search-btn-inside:hover { color: #ffffff !important; opacity: .9; }
.dr-mobile-topbar .form-control {
  background: rgba(var(--bs-primary-rgb, 13,110,253), .18) !important;
  color: #ffffff !important;
  -webkit-text-fill-color: #ffffff !important;
  caret-color: #ffffff;
  padding-top: .35rem; padding-bottom: .35rem; min-height: 34px;
  border-color: rgba(255,255,255,.35) !important;
}
.dr-mobile-topbar .form-control::placeholder { color: rgba(255,255,255,.95) !important; font-size: 12px; }
.dr-mobile-topbar .form-control:focus{
  box-shadow: 0 0 0 .18rem rgba(255,255,255,.12) !important;
  border-color: rgba(255,255,255,.55) !important;
}

/* ===== Dropdown Sort by ===== */
.dr-sort-dropdown { position:absolute; top: calc(100% + .375rem); right: 0; min-width: 160px; background: #fff; border: 1px solid rgba(100,116,139,.35); border-radius: .5rem; box-shadow: 0 12px 30px rgba(2,6,23,.12); padding: .25rem; z-index: 60; }
.dr-sort-item { display:flex; width:100%; align-items:center; gap:.5rem; background:transparent; border:0; color:#0f172a; font-size:12px; padding:.5rem .625rem; border-radius:.375rem; text-align:left; }
.dr-sort-item:hover, .dr-sort-item:focus-visible { background:#f8fafc; outline:none; }
.dr-sort-item.is-active { background:#eff6ff; color:#1d4ed8; font-weight:600; }
.dr-sort-btn, .dr-sort-btn i { color: #ffffff !important; }

